<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head></h:head>
<f:view>
    <h:body>

        <h:form>
            <ul>
                <ui:repeat value="#{catalogBean.categoryTypes}" var="categoryType">
                    <li>#{categoryType.categoryName}, #{categoryType.categoryPropertyLabel}
                        <ul>
                            KATEGORIE:
                            <ui:repeat value="#{categoryType.forestsByCategoryTypeId}" var="category">
                                <li>#{category.categoryTypeByCategoryTypeId.categoryName}, #{category.usersByUserId}, #{category.height}
                                    <h:commandButton value="REMOVE" action="#{catalogBean.removeCategory(category)}"
                                                     rendered="#{userController.canEdit(category.usersByUserId.login)}"/>
                                    <h:commandButton value="EDIT" action="#{addEditCategoryController.goToEdit(category)}"
                                                     rendered="#{userController.canEdit(category.usersByUserId.login)}"/>
                                    <ul>
                                        <ui:repeat value="#{category.elvesByForestId}" var="element">
                                            <li>
                                                #{element.elementTypeByElementTypeId.nameLabel}: #{element.name},
                                                #{element.elementTypeByElementTypeId.powerLabel}: #{element.power},
                                                #{element.elementTypeByElementTypeId.intLabel1}: #{element.arrowsCount},
                                                #{element.elementTypeByElementTypeId.intLabel2}: #{element.arrowType}
                                                <h:commandButton value="REMOVE" action="#{catalogBean.removeElement(element)}"
                                                                 rendered="#{userController.canEdit(category.usersByUserId.login)}"
                                                />
                                                <h:commandButton value="EDIT" action="#{addEditElementController.goToEdit(element)}"
                                                                 rendered="#{userController.canEdit(category.usersByUserId.login)}"
                                                />
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </li>
                            </ui:repeat>
                        </ul>
                    </li>
                </ui:repeat>
            </ul>
        </h:form>
    </h:body>

</f:view>
<h:link value="add category" outcome="add-category.xhtml"/><br/>
<h:link value="add element" outcome="add-element.xhtml"/><br/>
<h:link value="user" outcome="user.xhtml"/><br/>

<form action="${pageContext.request.contextPath}/client/logout">
    <input type="submit" name="LOGOUT"/>
</form>

</html>
